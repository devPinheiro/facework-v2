(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{569:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return m});function l(e){var t=e.modalVisibility,m=e.initialValues,a=e.onSubmit,l=e.validationSchema,r=e.setModalVisibility,n=e.serverError,c=Object(J.useState)(""),i=L()(c,2),s=i[0],o=i[1],d=Object(J.useState)(""),u=L()(d,2),f=u[0],b=u[1],p=Object(J.useRef)();return q.a.createElement(y.a,{modalVisibility:t},q.a.createElement(v.a,null,q.a.createElement("div",{className:"modal-container-active modal-container"},q.a.createElement("div",{className:"w-full px-4 py-4 border-grey-lightest border-b-2 "},q.a.createElement("div",{className:"flex flex-row justify-between"},q.a.createElement("p",{className:"md:text-xl text-black pt-2"},"Edit Profile"),q.a.createElement("span",{className:"justify-center px-2 py-2 rounded-full cursor-pointer",onClick:function(){return r(!t)}},"✖️"))),q.a.createElement("div",{className:"md:flex w-full border-none flex-col justify-center px-10 py-12"},n&&q.a.createElement("p",{className:"pb-4 text-red-light text-xs md:text-sm"},n),f&&q.a.createElement("p",{className:" text-red-light text-xs md:text-sm"},f),q.a.createElement("div",{className:"flex justify-center items-center pb-16"},q.a.createElement("img",{onClick:function(){return p.current.click()},src:s||m.image,alt:"avatar",className:"block w-32 h-32 rounded-full border border-grey-lightest"}),q.a.createElement("div",{className:"customPositionCamera  border border-grey-lightest rounded-full bg-white flex justify-center items-center"},q.a.createElement(H.c,{className:"mx-1 my-1 w-4 h-4 ",onClick:function(){return p.current.click()}}))),q.a.createElement(E.a,{onSubmit:a,initialValues:m,validationSchema:l},function(e){var t=e.values,a=e.errors,l=e.touched,r=(e.isValid,e.isSubmitting),n=e.handleChange,c=e.handleBlur,i=e.handleSubmit,s=e.setFieldValue;return q.a.createElement("form",{onSubmit:i,className:""},q.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-6"},q.a.createElement("input",{type:"file",ref:p,className:"hidden",onChange:function(e){b("");var t,a=e.target.files;a&&a[0]&&(1028643<a[0].size?b("Please select an image less than 1mb."):(s("image",e.currentTarget.files[0]),(t=new FileReader).onload=function(e){o(e.target.result)},t.readAsDataURL(a[0])))},accept:"image/png, image/jpeg"}),q.a.createElement("div",{class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"text",name:"name",label:"Full Name",onBlur:c,value:t.name||m.name,onChange:n,"data-testid":"name-field",error:l.name&&a.name})),q.a.createElement("div",{className:"w-full md:w-1/2 px-3"},q.a.createElement(x.a,{type:"email",name:"email",label:"Email",onBlur:c,value:t.email||m.email,onChange:n,"data-testid":"email-field",error:l.email&&a.email}))),q.a.createElement("div",{class:"flex flex-wrap -mx-3 mb-6"},q.a.createElement("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"text",name:"state",label:"City",onBlur:c,value:t.state||m.state,onChange:n,"data-testid":"state-field",error:l.state&&a.state})),q.a.createElement("div",{className:"w-full md:w-1/2 px-3"},q.a.createElement(x.a,{type:"text",name:"phone",label:"Phone",onBlur:c,value:t.phone||m.phone,onChange:n,"data-testid":"phone-field",error:l.phone&&a.phone}))),q.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-6"},q.a.createElement("div",{className:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"text",name:"service",label:"Occupation",onBlur:c,value:t.service||m.service,onChange:n,"data-testid":"service-field",error:l.service&&a.service})),q.a.createElement("div",{className:"w-full md:w-1/2 px-3"},q.a.createElement(x.a,{type:"text",name:"address",label:"Address",onBlur:c,value:t.address,onChange:n,"data-testid":"address-field",error:l.address&&a.address}))),q.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-6"},q.a.createElement("div",{class:"w-full px-3"},q.a.createElement(w.a,{name:"about",type:"textarea",col:"10",row:"10",label:"About ",onBlur:c,value:t.about||m.about,onChange:n,"data-testid":"about-field",error:l.about&&a.about}))),q.a.createElement("div",{className:"flex flex-wrap -mx-3 mb-2"},q.a.createElement("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"url",name:"facebook",label:"Facebook",onBlur:c,value:t.facebook||m.facebook,onChange:n,"data-testid":"facebook-field",placeholder:"https://facebook/your-handle",error:l.facebook&&a.facebook})," "),q.a.createElement("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"url",name:"twitter",label:"Twitter",onBlur:c,value:t.twitter||m.twitter,onChange:n,"data-testid":"twitter-field",placeholder:"https://twitter/your-handle",error:l.twitter&&a.twitter})),q.a.createElement("div",{className:"w-full md:w-1/3 px-3 mb-6 md:mb-0"},q.a.createElement(x.a,{type:"url",name:"instagram",label:"Instagram",onBlur:c,value:t.instagram||m.instagram,onChange:n,"data-testid":"instagram-field",placeholder:"https://instagram/your-profile",error:l.instagram&&a.instagram}))),q.a.createElement(Y.a,{type:"submit",loading:r,"data-testid":"submit-button"},"Update Profile"))})))))}var r=a(19),_=a.n(r),n=a(7),c=a.n(n),i=a(10),L=a.n(i),J=a(0),q=a.n(J),z=a(11),G=a(15),H=a(67),K=a(26),Q=a(134),W=a(135),X=a(282),E=(a(4),a(59)),Y=a(31),x=a(73),w=a(96),y=a(283),v=a(68);l.propTypes={};var Z=l,$=(a(343),a(9)),ee=a(42),te=a(27),ae=a(103),le=a(104),re=(a(325),a(12),"EDIT_USER_PROFILE_SUCCESS");function s(t,e){var a,l=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,a)),l}function ne(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach(function(e){c()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var m=function(e){var t=e.history,a=e.match.params,l=a.id,r=a.identifier,n=a.userID,c=Object(J.useState)(!1),i=L()(c,2),s=i[0],m=i[1],o=Object(J.useState)(!1),d=L()(o,2),u=d[0],f=d[1],b=Object($.c)(),p=Object(J.useState)({}),E=L()(p,2),x=E[0],w=E[1],y=Object(J.useState)([]),v=L()(y,2),g=v[0],h=v[1],N=Object(J.useState)(""),j=L()(N,2),O=j[0],k=j[1],S=Object(J.useState)(!1),C=L()(S,2),P=(C[0],C[1]),V=Object($.d)(function(e){return e.userProfile}),F=Object($.d)(function(e){return e.followUser}),B=Object($.d)(function(e){return e.unFollowUser}),D=Object(J.useState)(""),M=L()(D,2),U=M[0],R=M[1],T={duration:1,ease:[.43,.13,.23,.96]},A={exit:{y:"50%",opacity:.5,transition:ne({delay:1},T)},enter:{y:"0%",opacity:1,transition:T}},I={exit:{x:100,opacity:0,transition:ne({delay:1},T)},enter:{x:0,opacity:1,transition:ne({delay:1},T)}};Object(J.useEffect)(function(){n&&b(Object(ee.d)(!0,n))},[]),Object(J.useEffect)(function(){V.isSuccessful&&(w(V.data.profile),k(V.data.isFollowing),h(V.data&&V.data.posts.data))},[V]),Object(J.useEffect)(function(){F.isSuccessful?(P(F.data),k(!0)):P(!1)},[F]),Object(J.useEffect)(function(){B.isSuccessful?(P(B.data),k(!1)):P(!1)},[B]);return q.a.createElement(q.a.Fragment,null,q.a.createElement("div",null,l&&r&&q.a.createElement(W.a,{modalVisibility:s,setModalVisibility:function(){m(!s)},slug:l,identifier:r}),q.a.createElement(G.b.div,{className:"w-full m-auto max-w-2xl block sm:flex",initial:"exit",animate:"enter",exit:"exit"},q.a.createElement(G.b.div,{className:"md:w-1/4 my-8 mx-4 h-full p-4 shadow-md border-grey-lighter rounded-lg flex flex-col ",variants:A},q.a.createElement(X.a,_()({profile:!0},x)),n&&(O?q.a.createElement(Y.a,{click:function(){b(Object(le.d)(x.id))}},"Unfollow"):q.a.createElement(Y.a,{click:function(){b(Object(ae.d)(x.id))}},"Follow")),q.a.createElement("div",{className:"pt-6 flex flex-col w-full"},q.a.createElement("div",{className:"flex flex-row justify-between py-2"},q.a.createElement("p",{className:" text-sm"}," ",q.a.createElement("span",{className:"px-2 -mb-1"},q.a.createElement(H.a,null)," "),"Posts"),q.a.createElement("div",null,g&&g.length," ")),q.a.createElement("div",{className:"flex flex-row  justify-between py-2"}," ",q.a.createElement(z.b,{to:"/messages"},q.a.createElement("p",{className:" text-sm"}," ",q.a.createElement("span",{className:"px-2 -mb-1"},q.a.createElement(H.i,null)," "),"Messages")),q.a.createElement("div",{className:"bg-red rounded-full notify-badge h-2 w-2"})),!n&&q.a.createElement(q.a.Fragment,null,q.a.createElement("div",{className:"flex flex-row  justify-between py-2"}," ",q.a.createElement("p",{className:" text-sm",onClick:function(){return f(!u)}}," ",q.a.createElement("span",{className:"px-2 -mb-1"},q.a.createElement(H.d,null)," "),"Edit Profile")),q.a.createElement("div",{className:"flex flex-row  justify-between py-2"},q.a.createElement("p",{className:"text-sm",onClick:function(){return b(Object(te.f)(t))}},q.a.createElement("span",{className:"px-2 -mb-1"},q.a.createElement(H.g,null)," ")," ","Log Out")))),q.a.createElement("div",{className:"pt-4 flex flex-col"},q.a.createElement("h6",{className:"md:text-md text-black text-sm py-2"},"About me"),q.a.createElement("p",{className:"text-xxs"},x&&x.about)),q.a.createElement("div",{className:"py-4 "},q.a.createElement("h6",{className:"md:text-md text-black text-sm py-2"},"Social Media"),q.a.createElement("div",{className:"flex flex-row "},q.a.createElement("span",{className:"pr-4"},q.a.createElement(z.b,{to:x&&x.twitter||"#"},q.a.createElement(H.j,null))),q.a.createElement("span",{className:"pr-4"},q.a.createElement(z.b,{to:x&&x.instagram||"#"},q.a.createElement(H.f,null))),q.a.createElement("span",{className:"pr-4"},q.a.createElement(z.b,{to:x&&x.facebook||"#"},q.a.createElement(H.e,null)))))),q.a.createElement(G.b.div,{className:"text-xl text-black md:w-3/4 flex justify-between flex-wrap",variants:I},g&&g.map(function(e,t){return q.a.createElement("div",{className:"flex max-w-xs mx-2",key:t},q.a.createElement(Q.a,{title:e.title,image:e.featured,video:e.featured_video,key:t,time:e.created,avatar:e.avatar,name:e.name,slug:e.id,id:e.id,profilePage:!0,modalVisibility:s,setModalVisibility:m}))})))),q.a.createElement(Z,{modalVisibility:u,setModalVisibility:function(){return f(!u)},initialValues:x,onSubmit:function(e,t){var a,l,r,n=t.setSubmitting;t.resetForm;b((a=e,l=x.id,r=new FormData,Object.entries(a).forEach(function(e){var t=L()(e,2),a=t[0],l=t[1];r.append(a,l)}),{type:re,payload:{request:{method:"POST",url:"/profile/edit/".concat(l),data:r,headers:{"content-type":"multipart/form-data"}}}})).then(function(){b(Object(K.flashMessage)("Profile updated successfully")),m(!1),n(!1)}).catch(function(e){e.error;R("Something went wrong, check your network and please try again"),n(!1)})},serverError:U}))}}}]);